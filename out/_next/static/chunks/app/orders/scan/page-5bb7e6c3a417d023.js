(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{6584:function(e,t,s){Promise.resolve().then(s.bind(s,1499))},1499:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var a=s(7437),n=s(2265),r=s(9376),i=s(2451),l=s(3774),c=s(1723),d=s(6275),o=s(3041);let m=(0,s(9763).Z)("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);var u=s(4743),x=s(9554),h=s(9397),f=s(2489),b=s(2141);async function p(e){let t="ORD-".concat(Date.now().toString().slice(-6)),{data:s,error:a}=await b.O.from("orders").insert({venue_id:e.venue_id,venue_name:e.venue_name,order_number:t,table_number:e.table_number,items:e.items.map((e,t)=>({...e,id:e.id||"item-".concat(t+1),status:"pending"})),subtotal:e.total,tax:Math.round(.08*e.total),total:Math.round(1.08*e.total),status:e.status||"pending",payment_status:"pending",type:"dine_in",customer_name:e.customer_name,customer_phone:e.customer_phone}).select().single();if(a)throw console.error("Create order error:",a),a;return{...s,id:s.id}}function j(){let e=(0,r.useRouter)(),{venue:t,loading:s,error:j}=function(e){let[t,s]=(0,n.useState)(null),[a,r]=(0,n.useState)(!0),[i,l]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async function(){if(!e){r(!1);return}try{let{data:t,error:a}=await b.O.from("venues").select("*").eq("slug",e).single();if(a)throw a;let{data:n,error:r}=await b.O.from("menu_categories").select("*").eq("venue_id",t.id).eq("is_active",!0).order("display_order");if(r)throw r;let{data:i,error:l}=await b.O.from("menu_items").select("*").eq("venue_id",t.id).eq("is_available",!0);if(l)throw l;let c=(n||[]).map(e=>({id:e.id,name:e.name,description:e.description,items:(i||[]).filter(t=>t.category_id===e.id).map(e=>({id:e.id,name:e.name,description:e.description,price:Number(e.price),image_url:e.image_url,is_available:e.is_available}))}));s({id:t.id,name:t.name,slug:t.slug,description:t.description,category:t.category,address:t.address,district:t.district,city:t.city,phone:t.phone,instagram:t.instagram,rating:t.rating,reviewCount:t.review_count,workingHours:t.working_hours,menu:c})}catch(e){console.error("Venue fetch error:",e),l(e.message)}finally{r(!1)}})()},[e]),{venue:t,loading:a,error:i}}("nihals-break-point"),[g,y]=(0,n.useState)(""),[N,w]=(0,n.useState)([]),[v,k]=(0,n.useState)(!1),[Z,_]=(0,n.useState)(""),[C,S]=(0,n.useState)(""),[M,q]=(0,n.useState)(""),[z,I]=(0,n.useState)(!1),[O,A]=(0,n.useState)(""),[E,J]=(0,n.useState)(0),[L,G]=(0,n.useState)(!0);if((0,n.useEffect)(()=>{var e,s;(null==t?void 0:null===(s=t.menu)||void 0===s?void 0:null===(e=s[0])||void 0===e?void 0:e.id)&&!g&&y(t.menu[0].id)},[t]),s)return(0,a.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"})});if(!t)return(0,a.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center text-white",children:(0,a.jsx)("p",{children:"Mekan bulunamadı"})});let R=e=>{w(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+1}:t):[...t,{id:e.id,name:e.name,price:e.price,quantity:1}])},V=e=>{w(t=>{let s=t.find(t=>t.id===e);return s&&s.quantity>1?t.map(t=>t.id===e?{...t,quantity:t.quantity-1}:t):t.filter(t=>t.id!==e)})},H=e=>{var t;return(null===(t=N.find(t=>t.id===e))||void 0===t?void 0:t.quantity)||0},T=N.reduce((e,t)=>e+t.price*t.quantity,0),U=N.reduce((e,t)=>e+t.quantity,0),Y=async()=>{0!==N.length&&Z&&(J(T),A((await p({venue_id:t.id,venue_name:t.name,table_number:Z,items:N.map(e=>({id:e.id,name:e.name,price:e.price,quantity:e.quantity,note:M})),total:T,status:"pending",customer_name:C||"Misafir"})).id),I(!0),w([]),k(!1))};if(L){var B,D;return(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex flex-col",children:[(0,a.jsxs)("div",{className:"relative h-48 bg-gradient-to-br from-orange-600 to-amber-700",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/30"}),(0,a.jsx)("button",{onClick:()=>e.back(),className:"absolute top-4 left-4 w-10 h-10 rounded-full bg-black/30 backdrop-blur flex items-center justify-center z-10",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 right-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-1",children:t.name}),(0,a.jsx)("p",{className:"text-white/80 text-sm",children:[t.category].flat().join(" • ")})]})]}),(0,a.jsxs)("div",{className:"p-4 border-b border-white/5",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,a.jsx)(l.Z,{className:"w-5 h-5 text-orange-500 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm",children:t.address}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:[t.district,", ",t.city]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-400",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[(null===(B=t.workingHours)||void 0===B?void 0:B.open)||"09:00"," - ",(null===(D=t.workingHours)||void 0===D?void 0:D.close)||"00:00"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-yellow-500",children:"★"}),(0,a.jsxs)("span",{children:[t.rating," (",t.reviewCount,")"]})]})]})]}),(0,a.jsxs)("div",{className:"flex-1 p-6 flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-orange-500/20 flex items-center justify-center mb-6",children:(0,a.jsx)(d.Z,{className:"w-10 h-10 text-orange-500"})}),(0,a.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Sipariş Vermek İ\xe7in"}),(0,a.jsx)("p",{className:"text-gray-400 text-center mb-8",children:"Masa numaranızı girin"}),(0,a.jsx)("input",{type:"text",placeholder:"Masa No (\xf6rn: 5)",value:Z,onChange:e=>_(e.target.value),className:"w-full max-w-xs px-6 py-4 bg-[#1a1a1a] rounded-xl border border-white/10 text-center text-2xl font-bold outline-none focus:border-orange-500 mb-4"}),(0,a.jsx)("button",{onClick:()=>Z&&G(!1),disabled:!Z,className:"w-full max-w-xs py-4 bg-orange-500 rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:"Men\xfcy\xfc G\xf6r"})]}),(0,a.jsx)("div",{className:"p-4 border-t border-white/5",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-6 text-sm text-gray-400",children:[t.phone&&(0,a.jsxs)("a",{href:"tel:".concat(t.phone),className:"flex items-center gap-2 hover:text-white",children:[(0,a.jsx)(o.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Ara"})]}),t.instagram&&(0,a.jsxs)("a",{href:"https://instagram.com/".concat(t.instagram.replace("@","")),target:"_blank",className:"flex items-center gap-2 hover:text-white",children:[(0,a.jsx)(m,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:t.instagram})]})]})})]})}return z?(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex flex-col items-center justify-center p-6 pb-24",children:[(0,a.jsx)("div",{className:"w-20 h-20 rounded-full bg-green-500/20 flex items-center justify-center mb-6",children:(0,a.jsx)(u.Z,{className:"w-10 h-10 text-green-500"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Siparişiniz Alındı!"}),(0,a.jsx)("p",{className:"text-gray-400 text-center mb-1",children:t.name}),(0,a.jsxs)("p",{className:"text-gray-400 text-center mb-2",children:["Masa ",Z," i\xe7in siparişiniz hazırlanıyor"]}),(0,a.jsx)("p",{className:"text-orange-500 font-mono mb-8",children:O}),(0,a.jsxs)("div",{className:"w-full max-w-sm bg-[#1a1a1a] rounded-2xl p-4 border border-white/5 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Durum"}),(0,a.jsx)("span",{className:"px-3 py-1 bg-amber-500/20 text-amber-500 rounded-full text-sm",children:"Onay Bekleniyor"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Toplam"}),(0,a.jsxs)("span",{className:"font-bold",children:["₺",E]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Tahmini S\xfcre"}),(0,a.jsx)("span",{children:"15-20 dk"})]})]}),(0,a.jsx)("button",{onClick:()=>{I(!1),A(""),J(0)},className:"w-full max-w-sm py-4 bg-orange-500 rounded-xl font-semibold mb-3",children:"Yeni Sipariş Ver"}),(0,a.jsx)("button",{onClick:()=>e.push("/orders/my"),className:"w-full max-w-sm py-4 bg-[#1a1a1a] border border-white/10 rounded-xl font-semibold",children:"Siparişlerimi G\xf6r"})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a] text-white pb-32",children:[(0,a.jsx)("header",{className:"sticky top-0 z-40 bg-[#0a0a0a]/90 backdrop-blur border-b border-white/5 px-4 py-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>G(!0),className:"w-10 h-10 rounded-full bg-[#1a1a1a] border border-white/10 flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg font-bold",children:t.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:["Masa ",Z]})]})]}),(0,a.jsxs)("button",{onClick:()=>k(!0),className:"relative w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),U>0&&(0,a.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full text-xs flex items-center justify-center",children:U})]})]})}),(0,a.jsx)("div",{className:"sticky top-[73px] z-30 bg-[#0a0a0a] border-b border-white/5",children:(0,a.jsx)("div",{className:"flex overflow-x-auto py-3 px-4 gap-2 no-scrollbar",children:t.menu.map(e=>(0,a.jsx)("button",{onClick:()=>y(e.id),className:"flex-shrink-0 px-4 py-2 rounded-full font-medium transition-all text-sm ".concat(g===e.id?"bg-orange-500 text-white":"bg-[#1a1a1a] text-gray-400"),children:e.name},e.id))})}),(0,a.jsx)("div",{className:"px-4 py-4",children:t.menu.filter(e=>e.id===g).map(e=>(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("h2",{className:"text-lg font-bold mb-4",children:e.name}),e.items.map(e=>{let t=H(e.id);return(0,a.jsxs)("div",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-white/5 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 pr-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-1",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:e.description}),(0,a.jsxs)("p",{className:"text-orange-500 font-bold",children:["₺",e.price]})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:t>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>V(e.id),className:"w-8 h-8 rounded-full bg-[#242424] flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"w-6 text-center font-semibold",children:t}),(0,a.jsx)("button",{onClick:()=>R(e),className:"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})})]}):(0,a.jsx)("button",{onClick:()=>R(e),className:"px-4 py-2 bg-orange-500 rounded-lg font-medium text-sm",children:"Ekle"})})]},e.id)})]},e.id))}),U>0&&!v&&(0,a.jsx)("div",{className:"fixed bottom-24 left-4 right-4 z-50",children:(0,a.jsxs)("button",{onClick:()=>k(!0),className:"w-full py-4 bg-orange-500 rounded-xl font-semibold flex items-center justify-center gap-3 shadow-lg shadow-orange-500/30",children:[(0,a.jsx)(d.Z,{className:"w-5 h-5"}),"Sepeti G\xf6r (",U," \xfcr\xfcn) - ₺",T]})}),v&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-end",children:(0,a.jsxs)("div",{className:"w-full max-h-[80vh] bg-[#1a1a1a] rounded-t-3xl overflow-hidden flex flex-col mb-16",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-white/5",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"Sepetim"}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"w-8 h-8 rounded-full bg-[#242424] flex items-center justify-center",children:(0,a.jsx)(f.Z,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-4 space-y-3",children:0===N.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(d.Z,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Sepetiniz boş"})]}):(0,a.jsxs)(a.Fragment,{children:[N.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between bg-[#242424] rounded-xl p-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-orange-500",children:["₺",e.price," x ",e.quantity," = ₺",e.price*e.quantity]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>V(e.id),className:"w-8 h-8 rounded-full bg-[#1a1a1a] flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"w-6 text-center",children:e.quantity}),(0,a.jsx)("button",{onClick:()=>R(e),className:"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"w-4 h-4"})})]})]},e.id)),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("label",{className:"text-gray-400 text-sm mb-2 block",children:"Sipariş Notu (opsiyonel)"}),(0,a.jsx)("input",{type:"text",placeholder:"\xd6rn: Acısız olsun, ekstra sos",value:M,onChange:e=>q(e.target.value),className:"w-full px-4 py-3 bg-[#242424] rounded-xl border border-white/5 outline-none focus:border-orange-500"})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("label",{className:"text-gray-400 text-sm mb-2 block",children:"İsminiz (opsiyonel)"}),(0,a.jsx)("input",{type:"text",placeholder:"Siparişte g\xf6r\xfcnecek isim",value:C,onChange:e=>S(e.target.value),className:"w-full px-4 py-3 bg-[#242424] rounded-xl border border-white/5 outline-none focus:border-orange-500"})]})]})}),N.length>0&&(0,a.jsxs)("div",{className:"p-4 border-t border-white/5",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Toplam"}),(0,a.jsxs)("span",{className:"text-2xl font-bold",children:["₺",T]})]}),(0,a.jsxs)("button",{onClick:Y,className:"w-full py-4 bg-orange-500 rounded-xl font-semibold flex items-center justify-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-5 h-5"}),"Siparişi G\xf6nder"]})]})]})})]})}},2141:function(e,t,s){"use strict";s.d(t,{O:function(){return a}});let a=(0,s(9066).eI)("https://ipobkbhcrkrqgbohdeea.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlwb2JrYmhjcmtycWdib2hkZWVhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MzE1MjgsImV4cCI6MjA4MDAwNzUyOH0.QaUkRsv_B3Msc9qYmE366k1x_sTe8j5GxLUO3oKKg3w",{auth:{detectSessionInUrl:!0,persistSession:!0,autoRefreshToken:!0}})},9763:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{color:l="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:o,className:m="",children:u,...x}=s;return(0,a.createElement)("svg",{ref:i,...n,width:c,height:c,stroke:l,strokeWidth:o?24*Number(d)/Number(c):d,className:["lucide","lucide-".concat(r(e)),m].join(" "),...x},[...t.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(u)?u:[u]])});return s.displayName="".concat(e),s}},2451:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3774:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9554:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},3041:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},4743:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},6275:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[658,971,117,744],function(){return e(e.s=6584)}),_N_E=e.O()}]);