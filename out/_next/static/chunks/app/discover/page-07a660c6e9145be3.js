(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[583],{9752:function(e,t,a){Promise.resolve().then(a.bind(a,8905))},8905:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(7437),l=a(2265),r=a(9376),n=a(3774),i=a(4794),c=a(3247),o=a(2489);let d=(0,a(9763).Z)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);var u=a(5863),m=a(6595);let x=(0,a(9066).eI)("https://ipobkbhcrkrqgbohdeea.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlwb2JrYmhjcmtycWdib2hkZWVhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ0MzE1MjgsImV4cCI6MjA4MDAwNzUyOH0.QaUkRsv_B3Msc9qYmE366k1x_sTe8j5GxLUO3oKKg3w"),h=[{id:"all",label:"T\xfcm\xfc",emoji:"\uD83C\uDF7D️"},{id:"restaurant",label:"Restoran",emoji:"\uD83C\uDF7D️"},{id:"cafe",label:"Kafe",emoji:"☕"},{id:"bar",label:"Bar",emoji:"\uD83C\uDF78"},{id:"beach_club",label:"Beach Club",emoji:"\uD83C\uDFD6️"},{id:"fast_food",label:"Fast Food",emoji:"\uD83C\uDF54"},{id:"nightclub",label:"Gece Kul\xfcb\xfc",emoji:"\uD83C\uDF89"}],p={restaurant:"\uD83C\uDF7D️",cafe:"☕",bar:"\uD83C\uDF78",night_club:"\uD83C\uDF89",meal_takeaway:"\uD83C\uDF54",bakery:"\uD83E\uDD50",meal_delivery:"\uD83D\uDEB4",beach_club:"\uD83C\uDFD6️",fast_food:"\uD83C\uDF54",nightclub:"\uD83C\uDF89"},g=(e,t,a,s)=>{let l=(a-e)*Math.PI/180,r=(s-t)*Math.PI/180,n=Math.sin(l/2)*Math.sin(l/2)+Math.cos(e*Math.PI/180)*Math.cos(a*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return Math.round(12742*Math.atan2(Math.sqrt(n),Math.sqrt(1-n))*10)/10};function y(){let e=(0,r.useRouter)(),t=(0,r.useSearchParams)().get("mode"),[a,y]=(0,l.useState)([]),[b,f]=(0,l.useState)(!0),[j,k]=(0,l.useState)(""),[w,v]=(0,l.useState)("all"),[N,D]=(0,l.useState)({lat:40.9662,lng:29.0751,address:"Konum alınıyor..."}),[C,_]=(0,l.useState)(5),[F,M]=(0,l.useState)(!1);(0,l.useEffect)(()=>{"takeaway"===t&&localStorage.setItem("order_mode","takeaway")},[t]),(0,l.useEffect)(()=>{Z()},[]);let Z=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(async e=>{let t=e.coords.latitude,a=e.coords.longitude;D(e=>({...e,lat:t,lng:a}));try{let e=await fetch("https://nominatim.openstreetmap.org/reverse?lat=".concat(t,"&lon=").concat(a,"&format=json")),s=await e.json();D(e=>{var t,a,l;return{...e,address:(null===(t=s.address)||void 0===t?void 0:t.neighbourhood)||(null===(a=s.address)||void 0===a?void 0:a.suburb)||(null===(l=s.address)||void 0===l?void 0:l.district)||"Konum alındı"}})}catch(e){D(e=>({...e,address:"Konum alındı"}))}I(t,a)},()=>{D(e=>({...e,address:"Varsayılan konum"})),I(40.9662,29.0751)},{timeout:5e3}):I(40.9662,29.0751)},I=async(e,t)=>{f(!0);try{let{data:a,error:s}=await x.from("venues").select("*").eq("is_active",!0);s&&console.error("Venues error:",s);let l=(a||[]).map(a=>({id:"order-".concat(a.id),venueId:a.id,name:a.name,category:a.category||"restaurant",emoji:p[a.category]||"\uD83C\uDF7D️",lat:parseFloat(String(a.lat))||e,lon:parseFloat(String(a.lon))||t,address:a.address,district:a.district,rating:a.rating,priceLevel:a.price_level,distance:a.lat&&a.lon?g(e,t,parseFloat(String(a.lat)),parseFloat(String(a.lon))):0,isOrderEnabled:!0})),r=[];for(let a of["restaurant","cafe","bar","meal_takeaway","night_club"])try{let s=await fetch("/api/places?lat=".concat(e,"&lng=").concat(t,"&radius=3000&type=").concat(a)),l=await s.json();if(l.results&&l.results.length>0){let s=l.results.map(s=>({id:"google-".concat(s.place_id),name:s.name,category:"meal_takeaway"===a?"fast_food":"night_club"===a?"nightclub":a,emoji:p[a]||"\uD83C\uDF7D️",lat:s.geometry.location.lat,lon:s.geometry.location.lng,address:s.vicinity,rating:s.rating,priceLevel:s.price_level,distance:g(e,t,s.geometry.location.lat,s.geometry.location.lng),isOrderEnabled:!1}));r=[...r,...s]}}catch(e){console.log("Google Places fetch error for type:",a)}let n=new Set;r=r.filter(e=>{let t="".concat(e.lat.toFixed(4),",").concat(e.lon.toFixed(4));return!n.has(t)&&(n.add(t),!0)});let i=new Set(l.map(e=>"".concat(e.lat.toFixed(3),",").concat(e.lon.toFixed(3)))),c=r.filter(e=>!i.has("".concat(e.lat.toFixed(3),",").concat(e.lon.toFixed(3)))),o=[...l.sort((e,t)=>(e.distance||999)-(t.distance||999)),...c.sort((e,t)=>(e.distance||999)-(t.distance||999))];y(o)}catch(e){console.error("Load places error:",e)}finally{f(!1)}},E=a.filter(e=>(!C||!((e.distance||0)>C))&&(!j||!!e.name.toLowerCase().includes(j.toLowerCase()))&&("all"===w||("beach_club"===w?"beach_club"===e.category||e.name.toLowerCase().includes("beach"):"fast_food"===w?"fast_food"===e.category||"meal_takeaway"===e.category:"nightclub"===w?"nightclub"===e.category||"night_club"===e.category:e.category===w))),S=t=>{t.isOrderEnabled&&t.venueId?e.push("/venue/".concat(t.venueId)):window.open("https://www.google.com/maps/search/?api=1&query=".concat(t.lat,",").concat(t.lon),"_blank")};return(0,s.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a] text-white pb-24",children:[(0,s.jsxs)("div",{className:"sticky top-0 z-40 bg-[#0a0a0a] border-b border-white/5 p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[(0,s.jsx)(n.Z,{className:"w-4 h-4 text-orange-500"}),(0,s.jsx)("span",{children:N.address})]}),"takeaway"===t&&(0,s.jsxs)("div",{className:"flex items-center gap-1 px-3 py-1 bg-purple-500/20 rounded-full",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4 text-purple-400"}),(0,s.jsx)("span",{className:"text-xs text-purple-400 font-medium",children:"Paket Sipariş"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),(0,s.jsx)("input",{type:"text",placeholder:"Mekan veya yemek ara...",value:j,onChange:e=>k(e.target.value),className:"w-full pl-10 pr-10 py-3 bg-[#1a1a1a] rounded-xl text-white placeholder-gray-500 outline-none focus:ring-2 focus:ring-orange-500"}),j&&(0,s.jsx)("button",{onClick:()=>k(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,s.jsx)(o.Z,{className:"w-4 h-4 text-gray-500"})})]}),(0,s.jsx)("button",{onClick:()=>M(!F),className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(F?"bg-orange-500":"bg-[#1a1a1a]"),children:(0,s.jsx)(d,{className:"w-5 h-5"})})]}),(0,s.jsx)("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-1 -mx-4 px-4 scrollbar-hide",children:h.map(e=>(0,s.jsxs)("button",{onClick:()=>v(e.id),className:"flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm whitespace-nowrap transition-colors ".concat(w===e.id?"bg-orange-500 text-white":"bg-[#1a1a1a] text-gray-400"),children:[(0,s.jsx)("span",{children:e.emoji}),(0,s.jsx)("span",{children:e.label})]},e.id))})]}),F&&(0,s.jsxs)("div",{className:"p-4 bg-[#111] border-b border-white/5",children:[(0,s.jsxs)("label",{className:"text-sm text-gray-400 mb-2 block",children:["Mesafe: ",C," km"]}),(0,s.jsx)("input",{type:"range",min:"1",max:"10",value:C,onChange:e=>_(parseInt(e.target.value)),className:"w-full accent-orange-500"})]}),(0,s.jsx)("div",{className:"p-4 space-y-3",children:b?(0,s.jsxs)("div",{className:"flex flex-col items-center py-20",children:[(0,s.jsx)(u.Z,{className:"w-8 h-8 text-orange-500 animate-spin mb-4"}),(0,s.jsx)("p",{className:"text-gray-400",children:"Mekanlar y\xfckleniyor..."})]}):0===E.length?(0,s.jsxs)("div",{className:"text-center py-10",children:[(0,s.jsx)("p",{className:"text-gray-400 mb-2",children:j?"Arama sonucu bulunamadı":"Mekan bulunamadı"}),j&&(0,s.jsx)("button",{onClick:()=>k(""),className:"text-orange-500 text-sm",children:"Aramayı temizle"})]}):(0,s.jsxs)(s.Fragment,{children:["takeaway"===t&&(0,s.jsx)("div",{className:"bg-purple-500/10 border border-purple-500/30 rounded-xl p-3 mb-4",children:(0,s.jsx)("p",{className:"text-purple-300 text-sm text-center",children:"\uD83D\uDCE6 Paket sipariş modu aktif - ORDER etiketli mekanlardan sipariş verebilirsiniz"})}),E.map(e=>(0,s.jsx)("button",{onClick:()=>S(e),className:"w-full bg-[#1a1a1a] rounded-xl p-4 text-left hover:bg-[#222] transition-colors",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h3",{className:"font-semibold",children:e.name}),e.isOrderEnabled&&(0,s.jsx)("span",{className:"px-2 py-0.5 bg-orange-500/20 text-orange-500 text-xs rounded-full",children:"ORDER"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:e.address||e.district||"".concat(e.distance," km uzakta")}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mt-2",children:[e.rating&&(0,s.jsxs)("span",{className:"flex items-center gap-1 text-sm",children:[(0,s.jsx)(m.Z,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),e.rating]}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:[e.distance," km"]}),e.priceLevel&&(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"₺".repeat(e.priceLevel)})]})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-[#242424] rounded-lg flex items-center justify-center text-2xl ml-3",children:e.emoji})]})},e.id)),(0,s.jsxs)("p",{className:"text-center text-sm text-gray-500 pt-2",children:[(0,s.jsx)("span",{className:"text-orange-500",children:E.filter(e=>e.isOrderEnabled).length})," ORDER mekan",E.filter(e=>!e.isOrderEnabled).length>0&&(0,s.jsxs)(s.Fragment,{children:[" + ",(0,s.jsx)("span",{className:"text-gray-300",children:E.filter(e=>!e.isOrderEnabled).length})," \xe7evredeki mekan"]})]})]})})]})}function b(){return(0,s.jsx)(l.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] flex items-center justify-center",children:(0,s.jsx)(u.Z,{className:"w-8 h-8 animate-spin text-orange-500"})}),children:(0,s.jsx)(y,{})})}},9763:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let a=(0,s.forwardRef)((a,n)=>{let{color:i="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:m,...x}=a;return(0,s.createElement)("svg",{ref:n,...l,width:c,height:c,stroke:i,strokeWidth:d?24*Number(o)/Number(c):o,className:["lucide","lucide-".concat(r(e)),u].join(" "),...x},[...t.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(m)?m:[m]])});return a.displayName="".concat(e),a}},5863:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3774:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},4794:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},3247:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},6595:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},2489:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});let s=(0,a(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[658,971,117,744],function(){return e(e.s=9752)}),_N_E=e.O()}]);