(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{7214:function(e,t,r){Promise.resolve().then(r.t.bind(r,7960,23)),Promise.resolve().then(r.bind(r,3313)),Promise.resolve().then(r.bind(r,5720)),Promise.resolve().then(r.bind(r,4320)),Promise.resolve().then(r.bind(r,4759)),Promise.resolve().then(r.bind(r,9445)),Promise.resolve().then(r.bind(r,3055)),Promise.resolve().then(r.bind(r,7946)),Promise.resolve().then(r.t.bind(r,4742,23))},3313:function(e,t,r){"use strict";r.d(t,{default:function(){return u}});var n=r(7437),a=r(9376),s=r(9637),i=r(3247),o=r(2449),l=r(2369),c=r(6348);function u(){let e=(0,a.useRouter)(),t=(0,a.usePathname)(),{t:r}=(0,c.QT)(),u=[{icon:s.Z,label:r.nav.home,href:"/"},{icon:i.Z,label:r.nav.discover,href:"/discover"},{icon:o.Z,label:r.nav.orders,href:"/orders"},{icon:l.Z,label:r.nav.profile,href:"/profile"}];return["/auth"].some(e=>t.startsWith(e))?null:(0,n.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-[#0a0a0a] border-t border-white/10 z-50",children:(0,n.jsx)("div",{className:"flex justify-around items-center h-16",children:u.map(r=>{let a=t===r.href||"/"!==r.href&&t.startsWith(r.href);return(0,n.jsxs)("button",{onClick:()=>e.push(r.href),className:"flex flex-col items-center justify-center flex-1 h-full",children:[(0,n.jsx)(r.icon,{className:a?"w-6 h-6 text-orange-500":"w-6 h-6 text-gray-400"}),(0,n.jsx)("span",{className:a?"text-xs mt-1 text-orange-500 font-medium":"text-xs mt-1 text-gray-400",children:r.label})]},r.href)})})})}},5720:function(e,t,r){"use strict";r.d(t,{NotificationProvider:function(){return y}});var n=r(7437),a=r(2265),s=r(1047),i=r(3417),o=r(1197),l=r(2449),c=r(4766),u=r(2489),d=r(2141),m=r(4320),f=r(6348);let h=(0,a.createContext)(null);function y(e){let{children:t}=e,{user:r}=(0,m.a)(),{t:y}=(0,f.QT)(),[g,x]=(0,a.useState)([]),[v,p]=(0,a.useState)(!1),b=g.filter(e=>!e.read).length,w=e=>{let t={...e,id:Math.random().toString(36).substr(2,9),createdAt:new Date,read:!1};if(x(e=>[t,...e].slice(0,50)),"Audio"in window)try{let e=new Audio("/notification.mp3");e.volume=.3,e.play().catch(()=>{})}catch(e){}},k=e=>{x(t=>t.map(t=>t.id===e?{...t,read:!0}:t))},j=()=>{x(e=>e.map(e=>({...e,read:!0})))};(0,a.useEffect)(()=>{if(!r)return;let e=d.O.channel("user-messages-notif").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:"customer_id=eq.".concat(r.id)},e=>{if("customer"!==e.new.sender_type){var t;w({type:"message",title:y.notifications.newMessage,message:(null===(t=e.new.content)||void 0===t?void 0:t.substring(0,50))||y.notifications.newMessageDesc})}}).subscribe(),t=d.O.channel("user-reservations-notif").on("postgres_changes",{event:"UPDATE",schema:"public",table:"reservations",filter:"user_id=eq.".concat(r.id)},e=>{let t=e.new.status;"confirmed"===t?w({type:"reservation",title:y.notifications.reservationUpdate,message:y.reservations.confirmed}):"cancelled"===t&&w({type:"reservation",title:y.notifications.reservationUpdate,message:y.reservations.cancelled})}).subscribe(),n=d.O.channel("user-orders-notif").on("postgres_changes",{event:"UPDATE",schema:"public",table:"orders",filter:"user_id=eq.".concat(r.id)},e=>{"ready"===e.new.status&&w({type:"order",title:y.notifications.orderUpdate,message:y.orders.statusReady})}).subscribe();return()=>{d.O.removeChannel(e),d.O.removeChannel(t),d.O.removeChannel(n)}},[r,y]);let P=e=>{switch(e){case"reservation":return s.Z;case"message":return i.Z;case"waiter_call":return o.Z;case"order":return l.Z;default:return c.Z}},N=e=>{let t=Math.floor((new Date().getTime()-e.getTime())/6e4);if(t<1)return y.notifications.justNow||"Az \xf6nce";if(t<60)return"".concat(t," ").concat(y.notifications.minutesAgo||"dk \xf6nce");let r=Math.floor(t/60);return r<24?"".concat(r," ").concat(y.notifications.hoursAgo||"saat \xf6nce"):e.toLocaleDateString()},_=e=>{switch(e){case"reservation":return"bg-blue-500/20 text-blue-500";case"message":return"bg-green-500/20 text-green-500";case"waiter_call":return"bg-amber-500/20 text-amber-500";case"order":return"bg-purple-500/20 text-purple-500";default:return"bg-gray-500/20 text-gray-500"}};return(0,n.jsxs)(h.Provider,{value:{notifications:g,unreadCount:b,addNotification:w,markAsRead:k,markAllAsRead:j,clearAll:()=>{x([])}},children:[t,v&&(0,n.jsx)("div",{className:"fixed inset-0 z-50 bg-black/50",onClick:()=>p(!1),children:(0,n.jsxs)("div",{className:"absolute top-0 right-0 w-full max-w-sm h-full bg-[#0a0a0a] border-l border-white/10 overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{className:"p-4 border-b border-white/10 flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"text-lg font-bold text-white",children:y.notifications.title}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[b>0&&(0,n.jsx)("button",{onClick:j,className:"text-xs text-orange-500",children:y.notifications.markAllRead}),(0,n.jsx)("button",{onClick:()=>p(!1),className:"w-8 h-8 rounded-full bg-[#1a1a1a] flex items-center justify-center",children:(0,n.jsx)(u.Z,{className:"w-4 h-4 text-white"})})]})]}),(0,n.jsx)("div",{className:"overflow-y-auto h-full pb-20",children:0===g.length?(0,n.jsxs)("div",{className:"p-8 text-center",children:[(0,n.jsx)(c.Z,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),(0,n.jsx)("p",{className:"text-gray-400",children:y.notifications.noNotifications})]}):g.map(e=>{let t=P(e.type);return(0,n.jsxs)("div",{onClick:()=>k(e.id),className:"p-4 border-b border-white/5 flex gap-3 cursor-pointer ".concat(e.read?"opacity-60":"bg-white/5"),children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ".concat(_(e.type)),children:(0,n.jsx)(t,{className:"w-5 h-5 text-white"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)("p",{className:"font-medium text-white text-sm",children:e.title}),(0,n.jsx)("p",{className:"text-gray-400 text-xs mt-0.5 truncate",children:e.message}),(0,n.jsx)("p",{className:"text-gray-600 text-xs mt-1",children:N(e.createdAt)})]}),!e.read&&(0,n.jsx)("div",{className:"w-2 h-2 rounded-full bg-orange-500 mt-2"})]},e.id)})})]})})]})}},4759:function(e,t,r){"use strict";r.d(t,{CartProvider:function(){return o},j:function(){return i}});var n=r(7437),a=r(2265);let s=(0,a.createContext)(null);function i(){let e=(0,a.useContext)(s);if(!e)throw Error("useCart must be used within CartProvider");return e}function o(e){let{children:t}=e,[r,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[d,m]=(0,a.useState)(!1);(0,a.useEffect)(()=>{try{let e=localStorage.getItem("order_cart");if(e){let t=JSON.parse(e);i(t.items||[]),l(t.venueId||null),u(t.venueName||null)}}catch(e){console.error("Cart load error:",e)}m(!0)},[]),(0,a.useEffect)(()=>{d&&localStorage.setItem("order_cart",JSON.stringify({items:r,venueId:o,venueName:c}))},[r,o,c,d]);let f=e=>{i(t=>{let r=t.filter(t=>t.id!==e);return 0===r.length&&(l(null),u(null)),r})},h=r.reduce((e,t)=>e+t.quantity,0),y=r.reduce((e,t)=>e+t.price*t.quantity,0);return(0,n.jsx)(s.Provider,{value:{items:r,venueId:o,venueName:c,addItem:(e,t,r)=>{if(o&&o!==t){i([{...e,quantity:e.quantity||1}]),l(t),u(r);return}l(t),u(r),i(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?{...t,quantity:t.quantity+(e.quantity||1)}:t):[...t,{...e,quantity:e.quantity||1}])},updateQuantity:(e,t)=>{if(t<=0){f(e);return}i(r=>r.map(r=>r.id===e?{...r,quantity:t}:r))},removeItem:f,clearCart:()=>{i([]),l(null),u(null),localStorage.removeItem("order_cart")},cartCount:h,totalPrice:y},children:t})}},3055:function(e,t,r){"use strict";r.d(t,{LocationProvider:function(){return o},T:function(){return l}});var n=r(7437),a=r(2265);let s=(0,a.createContext)(void 0),i={latitude:41.0082,longitude:28.9784,district:"İstanbul",neighborhood:"Merkez"};function o(e){let{children:t}=e,[r,o]=(0,a.useState)("not_set"),[l,c]=(0,a.useState)(null),[u,d]=(0,a.useState)(!1),[m,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("location_permission");e&&(o(e),"always"===e||"while_using"===e?h():"never"===e&&c(i))},[]);let h=async()=>{if(!navigator.geolocation){f("Tarayıcınız konum \xf6zelliğini desteklemiyor"),c(i);return}d(!0),f(null);try{let{latitude:s,longitude:i}=(await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})})).coords;try{var e,t,r,n,a;let o=await fetch("https://nominatim.openstreetmap.org/reverse?lat=".concat(s,"&lon=").concat(i,"&format=json&accept-language=tr")),l=await o.json();c({latitude:s,longitude:i,district:(null===(e=l.address)||void 0===e?void 0:e.suburb)||(null===(t=l.address)||void 0===t?void 0:t.district)||(null===(r=l.address)||void 0===r?void 0:r.city_district)||"Bilinmiyor",neighborhood:(null===(n=l.address)||void 0===n?void 0:n.neighbourhood)||(null===(a=l.address)||void 0===a?void 0:a.quarter)||""})}catch(e){c({latitude:s,longitude:i})}}catch(e){1===e.code?(f("Konum izni reddedildi"),o("never"),localStorage.setItem("location_permission","never")):f("Konum alınamadı"),c(i)}finally{d(!1)}};return(0,n.jsx)(s.Provider,{value:{permission:r,location:l,loading:u,error:m,setPermission:e=>{o(e),localStorage.setItem("location_permission",e),"never"===e?c(i):("always"===e||"while_using"===e)&&h()},requestLocation:h,clearLocation:()=>{c(null),o("not_set"),localStorage.removeItem("location_permission")}},children:t})}function l(){let e=(0,a.useContext)(s);if(void 0===e)throw Error("useLocation must be used within a LocationProvider");return e}},7946:function(e,t,r){"use strict";r.d(t,{ThemeProvider:function(){return i}});var n=r(7437),a=r(2265);let s=(0,a.createContext)(null);function i(e){let{children:t}=e,[r,i]=(0,a.useState)("dark"),[o,l]=(0,a.useState)("dark"),[c,u]=(0,a.useState)(!1);(0,a.useEffect)(()=>{u(!0);let e=localStorage.getItem("theme");e&&i(e)},[]),(0,a.useEffect)(()=>{if(!c)return;let e="system"===r?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":r;if(l(e),"light"===e?(document.documentElement.classList.remove("dark"),document.documentElement.classList.add("light"),document.documentElement.style.setProperty("--bg-primary","#ffffff"),document.documentElement.style.setProperty("--bg-secondary","#f5f5f5"),document.documentElement.style.setProperty("--bg-card","#ffffff"),document.documentElement.style.setProperty("--text-primary","#000000"),document.documentElement.style.setProperty("--text-secondary","#666666"),document.documentElement.style.setProperty("--border-color","#e5e5e5")):(document.documentElement.classList.remove("light"),document.documentElement.classList.add("dark"),document.documentElement.style.setProperty("--bg-primary","#0a0a0a"),document.documentElement.style.setProperty("--bg-secondary","#1a1a1a"),document.documentElement.style.setProperty("--bg-card","#1a1a1a"),document.documentElement.style.setProperty("--text-primary","#ffffff"),document.documentElement.style.setProperty("--text-secondary","#9ca3af"),document.documentElement.style.setProperty("--border-color","rgba(255,255,255,0.1)")),"system"===r){let e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{l(e.matches?"dark":"light")};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}},[r,c]);let d=e=>{i(e),localStorage.setItem("theme",e)};return c?(0,n.jsx)(s.Provider,{value:{theme:r,resolvedTheme:o,setTheme:d,toggleTheme:()=>{d("dark"===o?"light":"dark")}},children:t}):(0,n.jsx)(n.Fragment,{children:t})}},4766:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},1047:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1197:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]])},9637:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},3417:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},3247:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},2449:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},2369:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},7960:function(){},4742:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[540,658,310,971,117,744],function(){return e(e.s=7214)}),_N_E=e.O()}]);