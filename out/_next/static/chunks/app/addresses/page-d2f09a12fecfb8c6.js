(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[899],{1401:function(e,s,a){Promise.resolve().then(a.bind(a,25))},25:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return N}});var t=a(7437),l=a(2265),d=a(9376),i=a(9637),r=a(9763);let n=(0,r.Z)("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);var o=a(3774),c=a(2660),u=a(9397),x=a(5863),m=a(6595);let h=(0,r.Z)("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),f=(0,r.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),v=(0,r.Z)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);var b=a(401),p=a(2141),g=a(4320),y=a(6348);let j={Ev:i.Z,Home:i.Z,İş:n,Work:n,default:o.Z};function N(){var e,s,a,i,r,n,v;let b=(0,d.useRouter)(),{user:N}=(0,g.a)(),{t:w}=(0,y.QT)(),[Z,_]=(0,l.useState)([]),[C,A]=(0,l.useState)(!0),[S,M]=(0,l.useState)(!1),[z,q]=(0,l.useState)(null);(0,l.useEffect)(()=>{N&&D()},[N]);let D=async()=>{if(!N)return;A(!0);let{data:e,error:s}=await p.O.from("user_addresses").select("*").eq("user_id",N.id).order("is_default",{ascending:!1}).order("created_at",{ascending:!1});!s&&e&&_(e),A(!1)},K=async e=>{N&&(await p.O.from("user_addresses").update({is_default:!1}).eq("user_id",N.id),await p.O.from("user_addresses").update({is_default:!0}).eq("id",e),D())},O=async e=>{var s;confirm((null===(s=w.addresses)||void 0===s?void 0:s.confirmDelete)||"Bu adresi silmek istediğinize emin misiniz?")&&(await p.O.from("user_addresses").delete().eq("id",e),D())},E=e=>j[e]||j.default;return N?(0,t.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a] text-white pb-24",children:[(0,t.jsx)("header",{className:"sticky top-0 z-40 bg-[#0a0a0a]/95 backdrop-blur border-b border-white/5 px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("button",{onClick:()=>b.back(),className:"w-10 h-10 rounded-full bg-[#1a1a1a] flex items-center justify-center",children:(0,t.jsx)(c.Z,{className:"w-5 h-5"})}),(0,t.jsx)("h1",{className:"text-xl font-bold",children:(null===(e=w.addresses)||void 0===e?void 0:e.title)||"Adreslerim"})]}),(0,t.jsx)("button",{onClick:()=>{q(null),M(!0)},className:"w-10 h-10 rounded-full bg-orange-500 flex items-center justify-center",children:(0,t.jsx)(u.Z,{className:"w-5 h-5"})})]})}),(0,t.jsx)("div",{className:"p-4 space-y-4",children:C?(0,t.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,t.jsx)(x.Z,{className:"w-8 h-8 animate-spin text-orange-500"})}):0===Z.length?(0,t.jsxs)("div",{className:"text-center py-20",children:[(0,t.jsx)(o.Z,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-2",children:(null===(s=w.addresses)||void 0===s?void 0:s.noAddresses)||"Kayıtlı Adres Yok"}),(0,t.jsx)("p",{className:"text-gray-400 mb-6",children:(null===(a=w.addresses)||void 0===a?void 0:a.addFirstAddress)||"Teslimat i\xe7in ilk adresinizi ekleyin"}),(0,t.jsxs)("button",{onClick:()=>M(!0),className:"px-6 py-3 bg-orange-500 rounded-xl font-medium inline-flex items-center gap-2",children:[(0,t.jsx)(u.Z,{className:"w-5 h-5"}),(null===(i=w.addresses)||void 0===i?void 0:i.addAddress)||"Adres Ekle"]})]}):Z.map(e=>{var s,a;let l=E(e.title);return(0,t.jsxs)("div",{className:"bg-[#1a1a1a] rounded-2xl p-4 border-2 transition-colors ".concat(e.is_default?"border-orange-500":"border-transparent"),children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center ".concat(e.is_default?"bg-orange-500":"bg-[#242424]"),children:(0,t.jsx)(l,{className:"w-6 h-6"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.title}),e.is_default&&(0,t.jsx)("span",{className:"px-2 py-0.5 bg-orange-500/20 text-orange-500 text-xs rounded-full",children:(null===(s=w.addresses)||void 0===s?void 0:s.default)||"Varsayılan"})]}),(0,t.jsx)("p",{className:"text-gray-400 text-sm mt-1 line-clamp-2",children:e.full_address}),(0,t.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:[e.district,", ",e.city]}),e.notes&&(0,t.jsxs)("p",{className:"text-gray-500 text-xs mt-1 italic",children:["\uD83D\uDCDD ",e.notes]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-white/5",children:[!e.is_default&&(0,t.jsxs)("button",{onClick:()=>K(e.id),className:"flex-1 py-2 bg-[#242424] rounded-xl text-sm font-medium flex items-center justify-center gap-2 hover:bg-[#2a2a2a]",children:[(0,t.jsx)(m.Z,{className:"w-4 h-4"}),(null===(a=w.addresses)||void 0===a?void 0:a.setDefault)||"Varsayılan Yap"]}),(0,t.jsx)("button",{onClick:()=>{q(e),M(!0)},className:"p-2 bg-[#242424] rounded-xl hover:bg-[#2a2a2a]",children:(0,t.jsx)(h,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>O(e.id),className:"p-2 bg-red-500/20 rounded-xl hover:bg-red-500/30 text-red-500",children:(0,t.jsx)(f,{className:"w-4 h-4"})})]})]},e.id)})}),S&&(0,t.jsx)(k,{address:z,onClose:()=>{M(!1),q(null)},onSave:()=>{M(!1),q(null),D()}})]}):(0,t.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(o.Z,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-xl font-bold mb-2",children:(null===(r=w.auth)||void 0===r?void 0:r.loginRequired)||"Giriş Yapın"}),(0,t.jsx)("p",{className:"text-gray-400 mb-4",children:(null===(n=w.addresses)||void 0===n?void 0:n.loginToManage)||"Adreslerinizi y\xf6netmek i\xe7in giriş yapın"}),(0,t.jsx)("button",{onClick:()=>b.push("/auth"),className:"px-6 py-3 bg-orange-500 rounded-xl font-medium",children:(null===(v=w.auth)||void 0===v?void 0:v.login)||"Giriş Yap"})]})})}function k(e){var s,a,d,r,c,u,m,h,f,j,N,k,w,Z,_,C;let{address:A,onClose:S,onSave:M}=e,{user:z}=(0,g.a)(),{t:q}=(0,y.QT)(),[D,K]=(0,l.useState)((null==A?void 0:A.title)||""),[O,E]=(0,l.useState)((null==A?void 0:A.full_address)||""),[T,P]=(0,l.useState)((null==A?void 0:A.district)||""),[V,H]=(0,l.useState)((null==A?void 0:A.city)||""),[L,Y]=(0,l.useState)((null==A?void 0:A.notes)||""),[G,R]=(0,l.useState)((null==A?void 0:A.is_default)||!1),[B,F]=(0,l.useState)(!1),[Q,W]=(0,l.useState)(!1),I=[{id:"home",label:(null===(s=q.addresses)||void 0===s?void 0:s.home)||"Ev",icon:i.Z},{id:"work",label:(null===(a=q.addresses)||void 0===a?void 0:a.work)||"İş",icon:n},{id:"other",label:(null===(d=q.addresses)||void 0===d?void 0:d.other)||"Diğer",icon:o.Z}],J=async()=>{if(!z||!D||!O||!T||!V){var e;alert((null===(e=q.addresses)||void 0===e?void 0:e.fillRequired)||"L\xfctfen t\xfcm alanları doldurun");return}F(!0),G&&await p.O.from("user_addresses").update({is_default:!1}).eq("user_id",z.id),A?await p.O.from("user_addresses").update({title:D,full_address:O,district:T,city:V,notes:L||null,is_default:G}).eq("id",A.id):await p.O.from("user_addresses").insert({user_id:z.id,title:D,full_address:O,district:T,city:V,notes:L||null,is_default:G}),F(!1),M()};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-end",children:(0,t.jsxs)("div",{className:"w-full bg-[#1a1a1a] rounded-t-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsxs)("div",{className:"p-4 border-b border-white/10 flex items-center justify-between flex-shrink-0",children:[(0,t.jsx)("h2",{className:"text-lg font-bold",children:A?(null===(r=q.addresses)||void 0===r?void 0:r.editAddress)||"Adresi D\xfczenle":(null===(c=q.addresses)||void 0===c?void 0:c.addAddress)||"Adres Ekle"}),(0,t.jsx)("button",{onClick:S,className:"text-gray-400",children:(null===(u=q.common)||void 0===u?void 0:u.close)||"Kapat"})]}),(0,t.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:(null===(m=q.addresses)||void 0===m?void 0:m.addressType)||"Adres Tipi"}),(0,t.jsx)("div",{className:"flex gap-2",children:I.map(e=>(0,t.jsxs)("button",{onClick:()=>K(e.label),className:"flex-1 py-3 rounded-xl flex items-center justify-center gap-2 transition-colors ".concat(D===e.label?"bg-orange-500 text-white":"bg-[#242424] text-gray-400"),children:[(0,t.jsx)(e.icon,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:e.label})]},e.id))})]}),(0,t.jsxs)("button",{onClick:()=>{if(!navigator.geolocation){alert("Konum servisi desteklenmiyor");return}W(!0),navigator.geolocation.getCurrentPosition(async e=>{try{let a=await fetch("https://nominatim.openstreetmap.org/reverse?format=json&lat=".concat(e.coords.latitude,"&lon=").concat(e.coords.longitude,"&accept-language=tr")),t=await a.json();if(t.address){var s;E((null===(s=t.display_name)||void 0===s?void 0:s.split(",").slice(0,3).join(","))||""),P(t.address.suburb||t.address.neighbourhood||t.address.district||""),H(t.address.city||t.address.province||t.address.state||"")}}catch(e){console.error("Geocoding error:",e)}W(!1)},()=>{W(!1),alert("Konum alınamadı")})},disabled:Q,className:"w-full py-3 bg-blue-500/20 text-blue-400 rounded-xl flex items-center justify-center gap-2",children:[Q?(0,t.jsx)(x.Z,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(v,{className:"w-5 h-5"}),(null===(h=q.addresses)||void 0===h?void 0:h.detectLocation)||"Konumumu Kullan"]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm text-gray-400 mb-2 block",children:[(null===(f=q.addresses)||void 0===f?void 0:f.fullAddress)||"A\xe7ık Adres"," *"]}),(0,t.jsx)("textarea",{value:O,onChange:e=>E(e.target.value),placeholder:(null===(j=q.addresses)||void 0===j?void 0:j.fullAddressPlaceholder)||"Sokak, bina no, daire no...",rows:2,className:"w-full bg-[#242424] border border-white/10 rounded-xl py-3 px-4 text-white resize-none"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm text-gray-400 mb-2 block",children:[(null===(N=q.addresses)||void 0===N?void 0:N.district)||"İl\xe7e"," *"]}),(0,t.jsx)("input",{type:"text",value:T,onChange:e=>P(e.target.value),placeholder:"Kadık\xf6y",className:"w-full bg-[#242424] border border-white/10 rounded-xl py-3 px-4 text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"text-sm text-gray-400 mb-2 block",children:[(null===(k=q.addresses)||void 0===k?void 0:k.city)||"Şehir"," *"]}),(0,t.jsx)("input",{type:"text",value:V,onChange:e=>H(e.target.value),placeholder:"İstanbul",className:"w-full bg-[#242424] border border-white/10 rounded-xl py-3 px-4 text-white"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:(null===(w=q.addresses)||void 0===w?void 0:w.notes)||"Adres Tarifi"}),(0,t.jsx)("input",{type:"text",value:L,onChange:e=>Y(e.target.value),placeholder:(null===(Z=q.addresses)||void 0===Z?void 0:Z.notesPlaceholder)||"Kapıda kod: 1234, 3. kat...",className:"w-full bg-[#242424] border border-white/10 rounded-xl py-3 px-4 text-white"})]}),(0,t.jsxs)("button",{onClick:()=>R(!G),className:"w-full p-4 bg-[#242424] rounded-xl flex items-center justify-between",children:[(0,t.jsx)("span",{children:(null===(_=q.addresses)||void 0===_?void 0:_.setAsDefault)||"Varsayılan adres olarak ayarla"}),(0,t.jsx)("div",{className:"w-12 h-7 rounded-full relative transition-colors ".concat(G?"bg-orange-500":"bg-gray-600"),children:(0,t.jsx)("div",{className:"absolute top-1 w-5 h-5 bg-white rounded-full transition-all ".concat(G?"right-1":"left-1")})})]})]}),(0,t.jsx)("div",{className:"p-4 border-t border-white/10 flex-shrink-0",children:(0,t.jsx)("button",{onClick:J,disabled:B||!D||!O||!T||!V,className:"w-full py-4 bg-orange-500 hover:bg-orange-600 disabled:bg-gray-700 rounded-xl font-bold flex items-center justify-center gap-2",children:B?(0,t.jsx)(x.Z,{className:"w-5 h-5 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(b.Z,{className:"w-5 h-5"}),(null===(C=q.common)||void 0===C?void 0:C.save)||"Kaydet"]})})})]})})}},2660:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},401:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},9637:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]])},5863:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3774:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},9397:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6595:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});let t=(0,a(9763).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])}},function(e){e.O(0,[658,310,971,117,744],function(){return e(e.s=1401)}),_N_E=e.O()}]);