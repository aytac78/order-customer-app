(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[535],{1574:function(e,t,s){Promise.resolve().then(s.bind(s,6735))},6735:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return g}});var n=s(7437),a=s(2265),r=s(9376),i=s(1047),c=s(2660),l=s(4766),o=s(3774),d=s(1723),m=s(5805),u=s(2489),x=s(2141),h=s(4320),f=s(6348);function g(){let e=(0,r.useRouter)(),{user:t,loading:s}=(0,h.a)(),{t:g,locale:p}=(0,f.QT)(),[y,v]=(0,a.useState)([]),[b,j]=(0,a.useState)(!0),[N,k]=(0,a.useState)("upcoming");(0,a.useEffect)(()=>{s||(t?w():j(!1))},[t,s]);let w=async()=>{if(!t){j(!1);return}try{let{data:e,error:s}=await x.O.from("reservations").select("*").or("user_id.eq.".concat(t.id,",customer_id.eq.").concat(t.id)).order("reservation_date",{ascending:!1});if(s){console.error("Reservations error:",s),j(!1);return}if(e&&e.length>0){let t=Array.from(new Set(e.map(e=>e.venue_id).filter(Boolean)));if(t.length>0){let{data:s}=await x.O.from("venues").select("id, name, address").in("id",t),n={};null==s||s.forEach(e=>{n[e.id]={name:e.name,address:e.address}}),e.forEach(e=>{e.venue=n[e.venue_id]||{name:g.common.venue,address:""}})}v(e)}else v([])}catch(e){console.error("Error:",e)}j(!1)},Z=async e=>{confirm(g.reservations.confirmCancel||"Rezervasyonu iptal etmek istediğinize emin misiniz?")&&(await x.O.from("reservations").update({status:"cancelled"}).eq("id",e),w())},_=new Date().toISOString().split("T")[0],C=y.filter(e=>e.reservation_date>=_&&"cancelled"!==e.status),z=y.filter(e=>e.reservation_date<_||"cancelled"===e.status),M={pending:"bg-yellow-500/20 text-yellow-500",confirmed:"bg-green-500/20 text-green-500",cancelled:"bg-red-500/20 text-red-500",completed:"bg-gray-500/20 text-gray-400",no_show:"bg-red-500/20 text-red-500"},S=e=>({pending:g.reservations.pending,confirmed:g.reservations.confirmed,cancelled:g.reservations.cancelled,completed:g.reservations.completed,no_show:g.reservations.no_show})[e]||e;if(s||b)return(0,n.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex items-center justify-center",children:(0,n.jsx)("div",{className:"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin"})});if(!t)return(0,n.jsx)("div",{className:"min-h-screen bg-[#0a0a0a] text-white flex items-center justify-center p-4 pb-24",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(i.Z,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,n.jsx)("h2",{className:"text-xl font-bold mb-2",children:g.auth.login}),(0,n.jsx)("p",{className:"text-gray-400 mb-4",children:g.reservations.loginToSee||"Rezervasyonlarınızı g\xf6rmek i\xe7in giriş yapın"}),(0,n.jsx)("button",{onClick:()=>e.push("/auth"),className:"px-6 py-3 bg-orange-500 rounded-xl font-medium",children:g.auth.login})]})});let q="upcoming"===N?C:z;return(0,n.jsxs)("div",{className:"min-h-screen bg-[#0a0a0a] text-white pb-24",children:[(0,n.jsx)("header",{className:"sticky top-0 z-40 bg-[#0a0a0a] border-b border-white/5 px-4 py-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("button",{onClick:()=>e.back(),className:"w-10 h-10 rounded-full bg-[#1a1a1a] flex items-center justify-center",children:(0,n.jsx)(c.Z,{className:"w-5 h-5"})}),(0,n.jsx)("h1",{className:"text-xl font-bold",children:g.reservations.myReservations})]}),(0,n.jsx)("button",{className:"w-10 h-10 rounded-full bg-[#1a1a1a] flex items-center justify-center",children:(0,n.jsx)(l.Z,{className:"w-5 h-5 text-gray-400"})})]})}),(0,n.jsxs)("div",{className:"flex p-4 gap-2",children:[(0,n.jsxs)("button",{onClick:()=>k("upcoming"),className:"flex-1 py-3 rounded-xl font-medium transition ".concat("upcoming"===N?"bg-orange-500 text-white":"bg-[#1a1a1a] text-gray-400"),children:[g.reservations.upcoming||"Yaklaşan"," (",C.length,")"]}),(0,n.jsxs)("button",{onClick:()=>k("past"),className:"flex-1 py-3 rounded-xl font-medium transition ".concat("past"===N?"bg-orange-500 text-white":"bg-[#1a1a1a] text-gray-400"),children:[g.reservations.past||"Ge\xe7miş"," (",z.length,")"]})]}),(0,n.jsx)("div",{className:"p-4 space-y-3",children:0===q.length?(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)(i.Z,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),(0,n.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"upcoming"===N?g.reservations.noUpcoming||"Yaklaşan rezervasyon yok":g.reservations.noPast||"Ge\xe7miş rezervasyon yok"}),"upcoming"===N&&(0,n.jsx)("button",{onClick:()=>e.push("/discover"),className:"mt-4 px-6 py-3 bg-orange-500 rounded-xl font-medium",children:g.nav.discover})]}):q.map(e=>{var t,s;return(0,n.jsxs)("div",{className:"bg-[#1a1a1a] rounded-xl p-4 border border-white/5",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-lg",children:(null===(t=e.venue)||void 0===t?void 0:t.name)||g.common.venue}),(null===(s=e.venue)||void 0===s?void 0:s.address)&&(0,n.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-400 mt-1",children:[(0,n.jsx)(o.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:e.venue.address})]})]}),(0,n.jsx)("span",{className:"px-2 py-1 rounded-lg text-xs font-medium ".concat(M[e.status]||"bg-gray-500/20 text-gray-400"),children:S(e.status)})]}),(0,n.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-300",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(i.Z,{className:"w-4 h-4 text-orange-500"}),(0,n.jsx)("span",{children:new Date(e.reservation_date).toLocaleDateString(p,{day:"numeric",month:"long",year:"numeric"})})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(d.Z,{className:"w-4 h-4 text-orange-500"}),(0,n.jsx)("span",{children:e.reservation_time})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(m.Z,{className:"w-4 h-4 text-orange-500"}),(0,n.jsxs)("span",{children:[e.party_size," ",g.reservations.person]})]})]}),e.notes&&(0,n.jsxs)("p",{className:"mt-2 text-sm text-gray-400",children:[g.reservations.note||"Not",": ",e.notes]}),"upcoming"===N&&"cancelled"!==e.status&&(0,n.jsxs)("button",{onClick:()=>Z(e.id),className:"mt-3 w-full py-2 border border-red-500/50 text-red-500 rounded-lg flex items-center justify-center gap-2",children:[(0,n.jsx)(u.Z,{className:"w-4 h-4"}),g.reservations.cancelReservation]})]},e.id)})})]})}},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},4766:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},1723:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},3774:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},5805:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},2489:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});let n=(0,s(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])}},function(e){e.O(0,[658,310,971,117,744],function(){return e(e.s=1574)}),_N_E=e.O()}]);